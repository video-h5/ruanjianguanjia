/*! 项目名称：weather 版本：3.0.0 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";function b(b,d){function e(){var a='<div class="scrollbar"><div class="track"><div class="thumb"><div class="thumb-hd"><div class="i4"></div><div class="i6"></div><div class="i8"></div></div><div class="thumb-bd"></div><div class="thumb-ft"><div class="i8"></div><div class="i6"></div><div class="i4"></div></div></div></div></div>';return b.prepend(a),b.find(".scrollbar")}function f(){p.update(),h()}function g(){u.css(A,p.thumbPosition),r.css(A,-p.contentPosition),s.css(z,p.trackSize),t.css(z,p.trackSize),u.css(z,p.thumbSize),v.css(z,u.height()-2*w.height()+"px")}function h(){x?q[0].ontouchstart=function(a){1===a.touches.length&&(a.stopPropagation(),k(a.touches[0]))}:(u.bind("mousedown",function(a){a.stopPropagation(),k(a)}),t.bind("mousedown",function(a){k(a,!0)}),u.bind("mouseover",function(){a(this).addClass("thumb-bd-hover")}),u.bind("mouseleave",function(){a(this).removeClass("thumb-bd-hover")}),o()),a(window).resize(function(){p.update("relative")}),p.options.wheel&&window.addEventListener?(b.off("mousewheel"),b.on("mousewheel",function(){l()})):p.options.wheel&&(b[0].onmousewheel=l)}function i(){return p.contentPosition>0}function j(){return p.contentPosition<=p.contentSize-p.viewportSize-5}function k(b,c){p.hasContentToSroll&&(a("body").addClass("noSelect"),B=c?u.offset()[A]:y?b.pageX:b.pageY,x?(document.ontouchmove=function(a){(p.options.touchLock||i()&&j())&&a.preventDefault(),m(a.touches[0])},document.ontouchend=n):(a(document).bind("mousemove",m),a(document).bind("mouseup",n),u.bind("mouseup",n),t.bind("mouseup",n)),m(b))}function l(c){if(p.hasContentToSroll){var d=c||window.event,e=-(d.deltaY||d.detail||-1/3*d.wheelDelta)/40,f=1===d.deltaMode?p.options.wheelSpeed:1;p.contentPosition-=e*f*p.options.wheelSpeed,p.contentPosition=Math.min(p.contentSize-p.viewportSize,Math.max(0,p.contentPosition)),p.thumbPosition=p.contentPosition/p.trackRatio,b.trigger("move"),u.css(A,p.thumbPosition),r.css(A,-p.contentPosition),(p.options.wheelLock||i()&&j())&&(d=a.event.fix(d),d.preventDefault())}}function m(a){if(p.hasContentToSroll){var c=y?a.pageX:a.pageY,d=x?B-c:c-B,e=Math.min(p.trackSize-p.thumbSize,Math.max(0,p.thumbPosition+d));p.contentPosition=e*p.trackRatio,b.trigger("move"),u.css(A,e),r.css(A,-p.contentPosition)}}function n(){p.thumbPosition=parseInt(u.css(A),10)||0,a("body").removeClass("noSelect"),a(document).unbind("mousemove",m),a(document).unbind("mouseup",n),u.unbind("mouseup",n),t.unbind("mouseup",n),document.ontouchmove=document.ontouchend=null}function o(){a(".thumb").each(function(a,b){function c(){this.onmousemove=null,this.onmouseup=null,this.releaseCapture&&this.releaseCapture()}this.onmousedown=function(a){a||event;return this.setCapture&&(this.onmouseup=c,this.setCapture()),!1}})}this._default={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20},this.options=a.extend({},this._default,d),this._name=c;var p=this,q=b.find(".viewport"),r=b.find(".overview"),s=b.children(".scrollbar").size()>0?b.children(".scrollbar"):e(),t=s.find(".track"),u=s.find(".thumb"),v=s.find(".thumb-bd"),w=s.find(".thumb-hd"),x="ontouchstart"in document.documentElement,y=("onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll","x"===this.options.axis),z=y?"width":"height",A=y?"left":"top",B=0;this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(c){var d=a(window).width(),e=a(window).height();b.height();b.css({width:d+"px"}),q.css({height:e+"px"});var f=z.charAt(0).toUpperCase()+z.slice(1).toLowerCase();switch(this.viewportSize=q[0]["offset"+f],this.contentSize=r[0]["scroll"+f],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,s.toggleClass("disable",!this.hasContentToSroll),c){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=Math.min(this.contentSize-this.viewportSize<0?0:this.contentSize-this.viewportSize,Math.max(0,Math.abs(parseInt(r.css("top")))))}this.thumbPosition=this.contentPosition/this.trackRatio,g()},f()}var c="tinyscrollbar";a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"pluginame_"+c,new b(a(this),d))})}});